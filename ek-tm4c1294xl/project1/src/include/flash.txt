/*------------------------------------------------------------------------------
FLASH.H

 Ќастройки флэш-пам€ти
------------------------------------------------------------------------------*/

#ifndef __FLASH
#define __FLASH


// размер страницы
#define wPAGE_SIZE      528

// размер страницы, доступный дл€ записи данных пользовател€
#define wFREEPAGE_SIZE  512

// количество страниц
#define wPAGES          8192


// количество повторов при чтении регистра состо€ни€
#define wREAD_STATUS    50000

// количество повторов при чтени€/записи страницы
#define bMAXREPEAT      8


// количество страниц на блок данных определЄнного типа
#define bUINT_CAN       (uchar)(sizeof(uint)    * bCANALS/wFREEPAGE_SIZE + 1)
#define bIMPULSE_CAN    (uchar)(sizeof(impulse) * bCANALS/wFREEPAGE_SIZE + 1)
#define bPOWER_GRP      (uchar)(sizeof(power)   * bGROUPS/wFREEPAGE_SIZE + 1)
#define bREAL_CAN       (uchar)(sizeof(real)    * bCANALS/wFREEPAGE_SIZE + 1)


// количество страниц дл€ графика профилей по получасам
#ifdef  DAYS100
#define wIMPHOUCAN_SIZE (uint)(wHOURS/4)
#else
#define wIMPHOUCAN_SIZE (uint)(wHOURS/1)
#endif


// адреса блоков данных
BEGIN(wFLA_BEGIN, 0)

RESERVE(wFLA_PRIVATE, 1)
RESERVE(wFLA_GLOBAL, 1)
RESERVE(wFLA_LOGICAL, 1)

RESERVE(wFLA_GROUPS, sizeof(group)*bGROUPS/wFREEPAGE_SIZE + 1)

RESERVE(wFLA_PUBLIC_TARIFFS, 1)
RESERVE(wFLA_TARIFFS_MODE, 1)

RESERVE(wFLA_DAY_ZONE, 1)

RESERVE(wFLA_ZONES_POW, 12*bMODES)
RESERVE(wFLA_ZONES_ENG, 12*bMODES)

RESERVE(wFLA_PERIOD_POW, 1)
RESERVE(wFLA_PERIOD_ENG, 1)

RESERVE(wFLA_RELAXS_FLAG, 1)
RESERVE(wFLA_RELAXS_TARIFF, 1)
RESERVE(wFLA_RELAXS, sizeof(relaxs)/wFREEPAGE_SIZE + 1)

RESERVE(wFLA_GAPS_FLAG, 1)
RESERVE(wFLA_GAPS, sizeof(gaps)/wFREEPAGE_SIZE + 1)

RESERVE(wFLA_TRANS_ENG, sizeof(real)*bCANALS/wFREEPAGE_SIZE + 1)
RESERVE(wFLA_TRANS_CNT, sizeof(real)*bCANALS/wFREEPAGE_SIZE + 1)
RESERVE(wFLA_PULSE_HOU, sizeof(real)*bCANALS/wFREEPAGE_SIZE + 1)
RESERVE(wFLA_PULSE_MNT, sizeof(real)*bCANALS/wFREEPAGE_SIZE + 1)

RESERVE(wFLA_COUNT, sizeof(real)*bCANALS/wFREEPAGE_SIZE + 1)
RESERVE(wFLA_LOSSE, sizeof(real)*bCANALS/wFREEPAGE_SIZE + 1)
RESERVE(wFLA_LEVEL, sizeof(real)*bCANALS/wFREEPAGE_SIZE + 1)

RESERVE(wFLA_DIGITALS, sizeof(digital)*bCANALS/wFREEPAGE_SIZE + 1)

RESERVE(wFLA_IMPHOUCAN, wIMPHOUCAN_SIZE)
RESERVE(wFLA_IMPDAYCAN, bIMPULSE_CAN*bDAYS)
RESERVE(wFLA_IMPMONCAN, bIMPULSE_CAN*bMONTHS)
RESERVE(wFLA_POWDAYGRP, bPOWER_GRP*bDAYS)
RESERVE(wFLA_POWMONGRP, bPOWER_GRP*bMONTHS)
RESERVE(wFLA_CNTMONCAN, bREAL_CAN*bMONTHS)

END(wFLA_END)


#endif
